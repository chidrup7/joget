{
    "elements": [{
        "elements": [{
            "elements": [
                {
                    "className": "org.joget.apps.form.lib.IdGeneratorField",
                    "properties": {
                        "hidden": "",
                        "format": "INV-??????",
                        "workflowVariable": "",
                        "envVariable": "counter",
                        "isDistributedGeneration": "",
                        "label": "Invoice Number",
                        "id": "invoice_number"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.SelectBox",
                    "properties": {
                        "controlField": "",
                        "readonly": "",
                        "size": "",
                        "optionsBinder": {
                            "className": "",
                            "properties": {}
                        },
                        "multiple": "",
                        "options": [
                            {
                                "label": "INR",
                                "value": "INR",
                                "grouping": ""
                            },
                            {
                                "label": "USD",
                                "value": "USD",
                                "grouping": ""
                            },
                            {
                                "label": "EUR",
                                "value": "EUR",
                                "grouping": ""
                            }
                        ],
                        "validator": {
                            "className": "org.joget.apps.form.lib.DefaultValidator",
                            "properties": {
                                "type": "",
                                "message": "Select a valid option",
                                "mandatory": "true"
                            }
                        },
                        "workflowVariable": "",
                        "label": "Currency",
                        "id": "currency",
                        "value": "",
                        "readonlyLabel": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "requiredSanitize": "",
                        "maxlength": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "label": "Total Amount",
                        "encryption": "",
                        "readonly": "",
                        "size": "",
                        "workflowVariable": "",
                        "style": "",
                        "id": "total_amount",
                        "placeholder": "",
                        "value": "",
                        "readonlyLabel": "",
                        "storeNumeric": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.CustomHTML",
                    "properties": {
                        "requiredSanitize": "",
                        "autoPopulate": "",
                        "label": "",
                        "id": "game_payment_html",
                        "value": "<!--<a href=\"#form.trailGame_pymtList.razorpay_payment_link#\">Pay with Razorpay<\/a>-->\n\n<!--<script>-->\n<!--  $(document).ready(function() {-->\n    // When the 'Continue' button is clicked, check if the Razorpay payment link exists\n<!--    $('#assignmentComplete').on('click', function() {-->\n      // Get the Razorpay payment link value using jQuery\n<!--      var razorpayLink = $('#form\\\\.trailGame_pymtList\\\\.razorpay_payment_link').val();-->\n\n      // Check if the Razorpay payment link exists\n<!--      if (razorpayLink) {-->\n        // Redirect the user to the Razorpay payment link\n<!--        window.location.href = razorpayLink;-->\n<!--      } else {-->\n<!--        alert(\"Payment link not generated yet.\");-->\n<!--      }-->\n<!--    });-->\n<!--  });-->\n<!--<\/script>-->\n\n<script>\n  $(document).ready(function() {\n    // Listen for the Complete button click\n    $('#assignmentComplete').on('click', function() {\n      // Call the generate Razorpay link function\n      generateRazorpayLink();\n    });\n  });\n\n  function generateRazorpayLink() {\n    $.ajax({\n      url: 'http://localhost:8080/jw/web/json/app/trailGameApp/1/plugin/org.joget.marketplace.PaymentProcessorTool/service',\n      method: 'GET',\n      data: {\n        action: 'generateLink',\n        provider: 'razorpay',\n        id: '48f622be-01e3-4aaa-8cc7-f942044dd16b',\n        formDefId: 'gamePaymentList'\n      },\n      success: function(response) {\n        // Check if the response contains the Razorpay payment link\n        if (response && response.paymentLink) {\n          // Store the Razorpay payment link in the form field\n          $('#form\\\\.trailGame_pymtList\\\\.razorpay_payment_link').val(response.paymentLink);\n\n          // Redirect the user to the Razorpay payment link\n          window.location.href = response.paymentLink;\n        } else {\n          alert(\"Payment link could not be generated.\");\n        }\n      },\n      error: function(error) {\n        console.error(\"Error generating Razorpay link:\", error);\n        alert(\"Error generating Razorpay link.\");\n      }\n    });\n  }\n<\/script>\n\n\n"
                    }
                }
            ],
            "className": "org.joget.apps.form.model.Column",
            "properties": {"width": "100%"}
        }],
        "className": "org.joget.apps.form.model.Section",
        "properties": {
            "visibilityControl": "",
            "permissionReadonly": "",
            "permission": {
                "className": "",
                "properties": {}
            },
            "label": "Game Payment",
            "reverse": "",
            "storeBinder": {
                "className": "",
                "properties": {}
            },
            "visibilityValue": "",
            "regex": "",
            "readonly": "",
            "loadBinder": {
                "className": "",
                "properties": {}
            },
            "comment": "",
            "id": "section2",
            "join": "",
            "readonlyLabel": ""
        }
    }],
    "className": "org.joget.apps.form.model.Form",
    "properties": {
        "noPermissionMessage": "",
        "loadBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "name": "Game Payment",
        "description": "",
        "postProcessorRunOn": "both",
        "permission": {
            "className": "",
            "properties": {}
        },
        "id": "gamePayment",
        "postProcessor": {
            "className": "org.joget.marketplace.PaymentProcessorTool",
            "properties": {
                "redirectUserviewMenu": "trailGameBookingApp",
                "totalAmount": "#form.trailGame_payment.total_amount#",
                "razorApiKey": "#appVariable.razorpay_api_key#",
                "formDefId": "gamePaymentList",
                "redirectUserviewMenuFormID": "payment_confirmation_page",
                "paymentMethod": "RAZORPAY",
                "apiSecret": "#appVariable.razorpay_api_secret#",
                "currency": "#form.trailGame_payment.currency#",
                "productName": "Joget Inc."
            }
        },
        "storeBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "tableName": "trailGame_payment"
    }
}